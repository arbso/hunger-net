<h1>Users</h1>
<!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">


<div class="btn-group" role="group" aria-label="Toolbar with button groups">

  <button (click)="sortByRole()" type="button" class="btn btn-secondary">Sort By Role</button>

  <button (click)="sortByUsername()" type="button" class="btn btn-secondary">Sort By Username</button>

  <button (click)="sortById()" type="button" class="btn btn-secondary">Sort By ID</button>

</div>


<table class="table table-bordered">
  <thead>
  <tr>
    <th>ID</th>
    <th>Username</th>
    <th>User Email</th>
    <th>Active</th>
    <th>User Details</th>
    <th>Roles</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let user of users | slice: (page-1) * pageSize : page * pageSize">
    <td>{{ user.id }}</td>
    <td>{{ user.username }}</td>
    <td>{{ user.email }}</td>
    <td>{{ user.active }}</td>
    <td>
      <div>
        <div *ngFor="let item of user.userDetails">
          First Name: {{item.firstName}} <p></p>Last Name: {{item.lastName}}<p></p> Phone Number: {{item.phoneNumber}}
        </div>
      </div>
    </td>
    <td>
      {{user.roles}}
    </td>

    <div class="btn-group" role="group" aria-label="Toolbar with button groups">

      <button (click)="updateUser(user.id)" type="button" class="btn btn-secondary"><i class="bi bi-pencil-fill"></i>
        Update
      </button>

      <button (click)="makeManager(user.id)" type="button" class="btn btn-secondary"><i
        class="bi bi-plus-circle-fill"></i> Promote to Manager
      </button>

      <button (click)="deleteUser(user.id)" type="button" class="btn btn-danger"><i class="bi bi-trash-fill"></i> Delete
      </button>

    </div>


  </tr>
  </tbody>
</table>

<div class="d-flex justify-content-center">
  <div class="row">
    <div class="col-md-4">
      <ngb-pagination class="d-flex justify-content-center"
                      [(page)]="page"
                      [pageSize]="pageSize"
                      [collectionSize]="users.length"></ngb-pagination>

    </div>
    <div class="col-md-8">
      <select class="custom-select" style="width: auto" name="pageSize" [(ngModel)]="pageSize">
        <option [ngValue]="5">5 items per page</option>
        <option [ngValue]="10">10 items per page</option>
        <option [ngValue]="15">15 items per page</option>
      </select>
    </div>
  </div>
